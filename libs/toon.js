/**
 * Bundled by jsDelivr using Rollup v2.79.2 and Terser v5.39.0.
 * Original file: /npm/@toon-format/toon@2.0.0/dist/index.mjs
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
const e="-",t="- ",n=":",i=".",r="[",o="null",c="true",l="false",s="\\",d='"',a="\t",f={comma:",",tab:a,pipe:"|"},y=f.comma;function u(e){return e.replace(/\\/g,`${s}${s}`).replace(/"/g,`${s}${d}`).replace(/\n/g,`${s}n`).replace(/\r/g,`${s}r`).replace(/\t/g,`${s}t`)}function h(e){let t="",n=0;for(;n<e.length;){if(e[n]===s){if(n+1>=e.length)throw new SyntaxError("Invalid escape sequence: backslash at end of string");const i=e[n+1];if("n"===i){t+="\n",n+=2;continue}if("t"===i){t+=a,n+=2;continue}if("r"===i){t+="\r",n+=2;continue}if(i===s){t+=s,n+=2;continue}if(i===d){t+=d,n+=2;continue}throw new SyntaxError(`Invalid escape sequence: \\${i}`)}t+=e[n],n++}return t}function p(e,t){let n=t+1;for(;n<e.length;)if(e[n]===s&&n+1<e.length)n+=2;else{if(e[n]===d)return n;n++}return-1}function b(e,t,n=0){let i=!1,r=n;for(;r<e.length;)if(e[r]===s&&r+1<e.length&&i)r+=2;else if(e[r]!==d){if(e[r]===t&&!i)return r;r++}else i=!i,r++;return-1}function m(e){return e===c||e===l||e===o}function g(e,t){const i=e.trimStart();let o=-1;if(i.startsWith(d)){const t=p(i,0);if(-1===t)return;if(!i.slice(t+1).startsWith(r))return;const n=e.length-i.length+t+1;o=e.indexOf(r,n)}else o=e.indexOf(r);if(-1===o)return;const c=e.indexOf("]",o);if(-1===c)return;let l=c+1,s=l;const y=e.indexOf("{",c);if(-1!==y&&y<e.indexOf(n,c)){const t=e.indexOf("}",y);-1!==t&&(s=t+1)}if(l=e.indexOf(n,Math.max(c,s)),-1===l)return;let u;if(o>0){const t=e.slice(0,o).trim();u=t.startsWith(d)?j(t):t}const h=e.slice(l+1).trim(),b=e.slice(o+1,c);let m;try{m=function(e,t){let n=e,i=t;n.endsWith(a)?(i=f.tab,n=n.slice(0,-1)):n.endsWith("|")&&(i=f.pipe,n=n.slice(0,-1));const r=Number.parseInt(n,10);if(Number.isNaN(r))throw new TypeError(`Invalid array length: ${e}`);return{length:r,delimiter:i}}(b,t)}catch{return}const{length:g,delimiter:k}=m;let w;if(-1!==y&&y<l){const t=e.indexOf("}",y);-1!==t&&t<l&&(w=v(e.slice(y+1,t),k).map((e=>j(e.trim()))))}return{header:{key:u,length:g,delimiter:k,fields:w},inlineValues:h||void 0}}function v(e,t){const n=[];let i="",r=!1,o=0;for(;o<e.length;){const c=e[o];c===s&&o+1<e.length&&r?(i+=c+e[o+1],o+=2):c!==d?c!==t||r?(i+=c,o++):(n.push(i.trim()),i="",o++):(r=!r,i+=c,o++)}return(i||n.length>0)&&n.push(i.trim()),n}function k(e){return e.map((e=>w(e)))}function w(e){const t=e.trim();if(!t)return"";if(t.startsWith(d))return j(t);if(m(t)){if(t===c)return!0;if(t===l)return!1;if(t===o)return null}if(function(e){if(!e)return!1;if(e.length>1&&"0"===e[0]&&"."!==e[1])return!1;const t=Number(e);return!Number.isNaN(t)&&Number.isFinite(t)}(t)){const e=Number.parseFloat(t);return Object.is(e,-0)?0:e}return t}function j(e){const t=e.trim();if(t.startsWith(d)){const e=p(t,0);if(-1===e)throw new SyntaxError("Unterminated string: missing closing quote");if(e!==t.length-1)throw new SyntaxError("Unexpected characters after closing quote");return h(t.slice(1,e))}return t}function O(e,t){let i=t;for(;i<e.length&&e[i]!==n;)i++;if(i>=e.length||e[i]!==n)throw new SyntaxError("Missing colon after key");const r=e.slice(t,i).trim();return i++,{key:r,end:i}}function $(e,t){const i=p(e,t);if(-1===i)throw new SyntaxError("Unterminated quoted key");const r=h(e.slice(t+1,i));let o=i+1;if(o>=e.length||e[o]!==n)throw new SyntaxError("Missing colon after key");return o++,{key:r,end:o}}function E(e,t){const n=e[t]===d;return{...n?$(e,t):O(e,t),isQuoted:n}}function S(e){return e.trim().startsWith(r)&&-1!==b(e,n)}function x(e){return-1!==b(e,n)}function N(e,t,n,i){t.lineNumber++;const r=t.lineNumber;let o=0;for(;o<e.length&&" "===e[o];)o++;const c=e.slice(o);if(!c.trim()){const e=A(o,n);return void t.blankLines.push({lineNumber:r,indent:o,depth:e})}const l=A(o,n);if(i){let t=0;for(;t<e.length&&(" "===e[t]||e[t]===a);)t++;if(e.slice(0,t).includes(a))throw new SyntaxError(`Line ${r}: Tabs are not allowed in indentation in strict mode`);if(o>0&&o%n!=0)throw new SyntaxError(`Line ${r}: Indentation must be exact multiple of ${n}, but found ${o} spaces`)}return{raw:e,indent:o,content:c,depth:l,lineNumber:r}}function A(e,t){return Math.floor(e/t)}function W(e,t,n,i){if(i.strict&&e!==t)throw new RangeError(`Expected ${t} ${n}, but got ${e}`)}function K(e,n,i){if(e?.depth===n&&e.content.startsWith(t))throw new RangeError(`Expected ${i} list array items, but found more`)}function I(e,i,r){if(e?.depth===i&&!e.content.startsWith(t)&&function(e,t){const i=e.indexOf(n),r=e.indexOf(t);return-1===i||-1!==r&&r<i}(e.content,r.delimiter))throw new RangeError(`Expected ${r.length} tabular rows, but found more`)}function L(e,t,n,i,r){if(!i)return;const o=n.find((n=>n.lineNumber>e&&n.lineNumber<t));if(o)throw new SyntaxError(`Line ${o.lineNumber}: Blank lines inside ${r} are not allowed in strict mode`)}var P=class{buffer=[];generator;done=!1;lastLine;scanState;constructor(e,t){this.generator=e,this.scanState=t}getBlankLines(){return this.scanState.blankLines}async peek(){if(this.buffer.length>0)return this.buffer[0];if(this.done)return;const e=await this.generator.next();if(!e.done)return this.buffer.push(e.value),e.value;this.done=!0}async next(){const e=await this.peek();return void 0!==e&&(this.buffer.shift(),this.lastLine=e),e}async advance(){await this.next()}current(){return this.lastLine}async atEnd(){return void 0===await this.peek()}peekSync(){if(this.buffer.length>0)return this.buffer[0];if(this.done)return;const e=this.generator.next();if(!e.done)return this.buffer.push(e.value),e.value;this.done=!0}nextSync(){const e=this.peekSync();return void 0!==e&&(this.buffer.shift(),this.lastLine=e),e}advanceSync(){this.nextSync()}atEndSync(){return void 0===this.peekSync()}};function*V(e,t){if(void 0!==t?.expandPaths)throw new Error("expandPaths is not supported in streaming decode");const n={indent:t?.indent??2,strict:t?.strict??!0},i={lineNumber:0,blankLines:[]},r=new P(function*(e,t,n,i){for(const r of e){const e=N(r,i,t,n);void 0!==e&&(yield e)}}(e,n.indent,n.strict,i),i),o=r.peekSync();if(!o)return yield{type:"startObject"},void(yield{type:"endObject"});if(S(o.content)){const e=g(o.content,y);if(e)return r.advanceSync(),void(yield*F(e.header,e.inlineValues,r,0,n))}if(r.advanceSync(),!r.atEndSync()||R(o)){for(yield{type:"startObject"},yield*q(o.content,r,0,n);!r.atEndSync();){const e=r.peekSync();if(!e||0!==e.depth)break;r.advanceSync(),yield*q(e.content,r,0,n)}yield{type:"endObject"}}else yield{type:"primitive",value:w(o.content.trim())}}function*q(e,t,i,r){const o=g(e,y);if(o&&o.header.key)return yield{type:"key",key:o.header.key},void(yield*F(o.header,o.inlineValues,t,i,r));const{key:c,isQuoted:l}=E(e,0),s=e.indexOf(n,c.length),d=s>=0?e.slice(s+1).trim():"";if(yield l?{type:"key",key:c,wasQuoted:!0}:{type:"key",key:c},!d){const e=t.peekSync();return e&&e.depth>i?(yield{type:"startObject"},yield*function*(e,t,n){let i;for(;!e.atEndSync();){const r=e.peekSync();if(!r||r.depth<t)break;if(void 0===i&&r.depth>=t&&(i=r.depth),r.depth!==i)break;e.advanceSync(),yield*q(r.content,e,i,n)}}(t,i+1,r),void(yield{type:"endObject"})):(yield{type:"startObject"},void(yield{type:"endObject"}))}yield{type:"primitive",value:w(d)}}function*F(n,i,r,o,c){return yield{type:"startArray",length:n.length},i?(yield*T(n,i,c),void(yield{type:"endArray"})):n.fields&&n.fields.length>0?(yield*function*(e,t,n,i){const r=n+1;let o,c,l=0;for(;!t.atEndSync()&&l<e.length;){const n=t.peekSync();if(!n||n.depth<r)break;if(n.depth!==r)break;{void 0===o&&(o=n.lineNumber),c=n.lineNumber,t.advanceSync();const r=v(n.content,e.delimiter);W(r.length,e.fields.length,"tabular row values",i);const s=k(r);yield*U(e.fields,s),l++}}W(l,e.length,"tabular rows",i),i.strict&&void 0!==o&&void 0!==c&&L(o,c,t.getBlankLines(),i.strict,"tabular array");i.strict&&I(t.peekSync(),r,e)}(n,r,o,c),void(yield{type:"endArray"})):(yield*function*(n,i,r,o){const c=r+1;let l,s,d=0;for(;!i.atEndSync()&&d<n.length;){const n=i.peekSync();if(!n||n.depth<c)break;const r=n.content.startsWith(t)||n.content===e;if(n.depth!==c||!r)break;{void 0===l&&(l=n.lineNumber),s=n.lineNumber,yield*M(i,c,o);const e=i.current();e&&(s=e.lineNumber),d++}}W(d,n.length,"list array items",o),o.strict&&void 0!==l&&void 0!==s&&L(l,s,i.getBlankLines(),o.strict,"list array");o.strict&&K(i.peekSync(),c,n.length)}(n,r,o,c),void(yield{type:"endArray"}))}function*T(e,t,n){if(!t.trim())return void W(0,e.length,"inline array items",n);const i=k(v(t,e.delimiter));W(i.length,e.length,"inline array items",n);for(const e of i)yield{type:"primitive",value:e}}function*M(n,i,r){const o=n.nextSync();if(!o)throw new ReferenceError("Expected list item");let c;if(o.content===e){const e=i+1,o=n.peekSync();if(!o||o.depth<e)return yield{type:"startObject"},void(yield{type:"endObject"});if(o.depth!==e||o.content.startsWith(t))return yield{type:"startObject"},void(yield{type:"endObject"});for(yield{type:"startObject"};!n.atEndSync();){const i=n.peekSync();if(!i||i.depth<e)break;if(i.depth!==e||i.content.startsWith(t))break;n.advanceSync(),yield*q(i.content,n,e,r)}return void(yield{type:"endObject"})}if(!o.content.startsWith(t))throw new SyntaxError(`Expected list item to start with "${t}"`);if(c=o.content.slice(2),!c.trim())return yield{type:"startObject"},void(yield{type:"endObject"});if(S(c)){const e=g(c,y);if(e)return void(yield*F(e.header,e.inlineValues,n,i,r))}const l=g(c,y);if(l&&l.header.key&&l.header.fields){const e=l.header;yield{type:"startObject"},yield{type:"key",key:e.key},yield*F(e,l.inlineValues,n,i+1,r);const o=i+1;for(;!n.atEndSync();){const e=n.peekSync();if(!e||e.depth<o)break;if(e.depth!==o||e.content.startsWith(t))break;n.advanceSync(),yield*q(e.content,n,o,r)}yield{type:"endObject"}}else if(x(c)){yield{type:"startObject"},yield*q(c,n,i+1,r);const e=i+1;for(;!n.atEndSync();){const i=n.peekSync();if(!i||i.depth<e)break;if(i.depth!==e||i.content.startsWith(t))break;n.advanceSync(),yield*q(i.content,n,e,r)}yield{type:"endObject"}}else yield{type:"primitive",value:w(c)}}function R(e){const t=e.content;if(t.startsWith('"')){const e=p(t,0);return-1!==e&&t.slice(e+1).includes(n)}return t.includes(n)}async function*_(e,t){if(void 0!==t?.expandPaths)throw new Error("expandPaths is not supported in streaming decode");const n={indent:t?.indent??2,strict:t?.strict??!0},i={lineNumber:0,blankLines:[]};if(Symbol.asyncIterator in e){const t=new P(async function*(e,t,n,i){for await(const r of e){const e=N(r,i,t,n);void 0!==e&&(yield e)}}(e,n.indent,n.strict,i),i),r=await t.peek();if(!r)return yield{type:"startObject"},void(yield{type:"endObject"});if(S(r.content)){const e=g(r.content,y);if(e)return await t.advance(),void(yield*D(e.header,e.inlineValues,t,0,n))}if(await t.advance(),await t.atEnd()&&!R(r))return void(yield{type:"primitive",value:w(r.content.trim())});for(yield{type:"startObject"},yield*B(r.content,t,0,n);!await t.atEnd();){const e=await t.peek();if(!e||0!==e.depth)break;await t.advance(),yield*B(e.content,t,0,n)}yield{type:"endObject"}}else yield*V(e,t)}async function*B(e,t,i,r){const o=g(e,y);if(o&&o.header.key)return yield{type:"key",key:o.header.key},void(yield*D(o.header,o.inlineValues,t,i,r));const{key:c,isQuoted:l}=E(e,0),s=e.indexOf(n,c.length),d=s>=0?e.slice(s+1).trim():"";if(yield l?{type:"key",key:c,wasQuoted:!0}:{type:"key",key:c},!d){const e=await t.peek();return e&&e.depth>i?(yield{type:"startObject"},yield*async function*(e,t,n){let i;for(;!await e.atEnd();){const r=await e.peek();if(!r||r.depth<t)break;if(void 0===i&&r.depth>=t&&(i=r.depth),r.depth!==i)break;await e.advance(),yield*B(r.content,e,i,n)}}(t,i+1,r),void(yield{type:"endObject"})):(yield{type:"startObject"},void(yield{type:"endObject"}))}yield{type:"primitive",value:w(d)}}async function*D(n,i,r,o,c){return yield{type:"startArray",length:n.length},i?(yield*T(n,i,c),void(yield{type:"endArray"})):n.fields&&n.fields.length>0?(yield*async function*(e,t,n,i){const r=n+1;let o,c,l=0;for(;!await t.atEnd()&&l<e.length;){const n=await t.peek();if(!n||n.depth<r)break;if(n.depth!==r)break;{void 0===o&&(o=n.lineNumber),c=n.lineNumber,await t.advance();const r=v(n.content,e.delimiter);W(r.length,e.fields.length,"tabular row values",i);const s=k(r);yield*U(e.fields,s),l++}}W(l,e.length,"tabular rows",i),i.strict&&void 0!==o&&void 0!==c&&L(o,c,t.getBlankLines(),i.strict,"tabular array");i.strict&&I(await t.peek(),r,e)}(n,r,o,c),void(yield{type:"endArray"})):(yield*async function*(n,i,r,o){const c=r+1;let l,s,d=0;for(;!await i.atEnd()&&d<n.length;){const n=await i.peek();if(!n||n.depth<c)break;const r=n.content.startsWith(t)||n.content===e;if(n.depth!==c||!r)break;{void 0===l&&(l=n.lineNumber),s=n.lineNumber,yield*Q(i,c,o);const e=i.current();e&&(s=e.lineNumber),d++}}W(d,n.length,"list array items",o),o.strict&&void 0!==l&&void 0!==s&&L(l,s,i.getBlankLines(),o.strict,"list array");o.strict&&K(await i.peek(),c,n.length)}(n,r,o,c),void(yield{type:"endArray"}))}async function*Q(n,i,r){const o=await n.next();if(!o)throw new ReferenceError("Expected list item");let c;if(o.content===e){const e=i+1,o=await n.peek();if(!o||o.depth<e)return yield{type:"startObject"},void(yield{type:"endObject"});if(o.depth!==e||o.content.startsWith(t))return yield{type:"startObject"},void(yield{type:"endObject"});for(yield{type:"startObject"};!n.atEnd();){const i=await n.peek();if(!i||i.depth<e)break;if(i.depth!==e||i.content.startsWith(t))break;await n.advance(),yield*B(i.content,n,e,r)}return void(yield{type:"endObject"})}if(!o.content.startsWith(t))throw new SyntaxError(`Expected list item to start with "${t}"`);if(c=o.content.slice(2),!c.trim())return yield{type:"startObject"},void(yield{type:"endObject"});if(S(c)){const e=g(c,y);if(e)return void(yield*D(e.header,e.inlineValues,n,i,r))}const l=g(c,y);if(l&&l.header.key&&l.header.fields){const e=l.header;yield{type:"startObject"},yield{type:"key",key:e.key},yield*D(e,l.inlineValues,n,i+1,r);const o=i+1;for(;!await n.atEnd();){const e=await n.peek();if(!e||e.depth<o)break;if(e.depth!==o||e.content.startsWith(t))break;await n.advance(),yield*B(e.content,n,o,r)}yield{type:"endObject"}}else if(x(c)){yield{type:"startObject"},yield*B(c,n,i+1,r);const e=i+1;for(;!await n.atEnd();){const i=await n.peek();if(!i||i.depth<e)break;if(i.depth!==e||i.content.startsWith(t))break;await n.advance(),yield*B(i.content,n,e,r)}yield{type:"endObject"}}else yield{type:"primitive",value:w(c)}}function*U(e,t){yield{type:"startObject"};for(let n=0;n<e.length;n++)yield{type:"key",key:e[n]},yield{type:"primitive",value:t[n]};yield{type:"endObject"}}function C(e){if(null===e)return null;if("string"==typeof e||"boolean"==typeof e)return e;if("number"==typeof e)return Object.is(e,-0)?0:Number.isFinite(e)?e:null;if("bigint"==typeof e)return e>=Number.MIN_SAFE_INTEGER&&e<=Number.MAX_SAFE_INTEGER?Number(e):e.toString();if(e instanceof Date)return e.toISOString();if(Array.isArray(e))return e.map(C);if(e instanceof Set)return Array.from(e).map(C);if(e instanceof Map)return Object.fromEntries(Array.from(e,(([e,t])=>[String(e),C(t)])));if(function(e){if(null===e||"object"!=typeof e)return!1;const t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}(e)){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=C(e[n]));return t}return null}function G(e){return null===e||"string"==typeof e||"number"==typeof e||"boolean"==typeof e}function Z(e){return Array.isArray(e)}function z(e){return null!==e&&"object"==typeof e&&!Array.isArray(e)}function X(e){return 0===Object.keys(e).length}function Y(e){return 0===e.length||e.every((e=>G(e)))}function H(e){return 0===e.length||e.every((e=>z(e)))}function J(e){return/^[A-Z_]\w*$/i.test(e)}const ee=Symbol("quotedKey");function te(e,t){if(Array.isArray(e))return e.map((e=>te(e,t)));if(z(e)){const n={},r=e[ee];for(const[o,c]of Object.entries(e)){const e=r?.has(o);if(o.includes(i)&&!e){const e=o.split(i);if(e.every((e=>J(e)))){ne(n,e,te(c,t),t);continue}}const l=te(c,t);if(o in n){const e=n[o];if(re(e,l))ie(e,l,t);else{if(t)throw new TypeError(`Path expansion conflict at key "${o}": cannot merge ${typeof e} with ${typeof l}`);n[o]=l}}else n[o]=l}return n}return e}function ne(e,t,n,i){let r=e;for(let e=0;e<t.length-1;e++){const n=t[e],o=r[n];if(void 0===o){const e={};r[n]=e,r=e}else if(z(o))r=o;else{if(i)throw new TypeError(`Path expansion conflict at segment "${n}": expected object but found ${typeof o}`);const e={};r[n]=e,r=e}}const o=t[t.length-1],c=r[o];if(void 0===c)r[o]=n;else if(re(c,n))ie(c,n,i);else{if(i)throw new TypeError(`Path expansion conflict at key "${o}": cannot merge ${typeof c} with ${typeof n}`);r[o]=n}}function ie(e,t,n){for(const[i,r]of Object.entries(t)){const t=e[i];if(void 0===t)e[i]=r;else if(re(t,r))ie(t,r,n);else{if(n)throw new TypeError(`Path expansion conflict at key "${i}": cannot merge ${typeof t} with ${typeof r}`);e[i]=r}}}function re(e,t){return z(e)&&z(t)}function oe(e){const t={stack:[],root:void 0};for(const n of e)ce(t,n);return function(e){if(0!==e.stack.length)throw new Error("Incomplete event stream: stack not empty at end");if(void 0===e.root)throw new Error("No root value built from events");return e.root}(t)}function ce(e,t){const{stack:n}=e;switch(t.type){case"startObject":{const e={},t=new Set;if(0===n.length)n.push({type:"object",obj:e,quotedKeys:t});else{const i=n[n.length-1];if("object"===i.type){if(void 0===i.currentKey)throw new Error("Object startObject event without preceding key");i.obj[i.currentKey]=e,i.currentKey=void 0}else"array"===i.type&&i.arr.push(e);n.push({type:"object",obj:e,quotedKeys:t})}break}case"endObject":{if(0===n.length)throw new Error("Unexpected endObject event");const t=n.pop();if("object"!==t.type)throw new Error("Mismatched endObject event");t.quotedKeys.size>0&&Object.defineProperty(t.obj,ee,{value:t.quotedKeys,enumerable:!1,writable:!1,configurable:!1}),0===n.length&&(e.root=t.obj);break}case"startArray":{const e=[];if(0===n.length)n.push({type:"array",arr:e});else{const t=n[n.length-1];if("object"===t.type){if(void 0===t.currentKey)throw new Error("Array startArray event without preceding key");t.obj[t.currentKey]=e,t.currentKey=void 0}else"array"===t.type&&t.arr.push(e);n.push({type:"array",arr:e})}break}case"endArray":{if(0===n.length)throw new Error("Unexpected endArray event");const t=n.pop();if("array"!==t.type)throw new Error("Mismatched endArray event");0===n.length&&(e.root=t.arr);break}case"key":{if(0===n.length)throw new Error("Key event outside of object context");const e=n[n.length-1];if("object"!==e.type)throw new Error("Key event in non-object context");e.currentKey=t.key,t.wasQuoted&&e.quotedKeys.add(t.key);break}case"primitive":if(0===n.length)e.root=t.value;else{const e=n[n.length-1];if("object"===e.type){if(void 0===e.currentKey)throw new Error("Primitive event without preceding key in object");e.obj[e.currentKey]=t.value,e.currentKey=void 0}else"array"===e.type&&e.arr.push(t.value)}}}function le(e,t,n,r,o,c,l){if("safe"!==r.keyFolding)return;if(!z(t))return;const{segments:s,tail:d,leafValue:a}=function(e,t,n){const i=[e];let r=t;for(;i.length<n&&z(r);){const e=Object.keys(r);if(1!==e.length)break;const t=e[0],n=r[t];i.push(t),r=n}return!z(r)||X(r)?{segments:i,tail:void 0,leafValue:r}:{segments:i,tail:r,leafValue:r}}(e,t,l??r.flattenDepth);if(s.length<2)return;if(!s.every((e=>J(e))))return;const f=function(e){return e.join(i)}(s),y=c?`${c}${i}${f}`:f;return n.includes(f)||o&&o.has(y)?void 0:{foldedKey:f,remainder:d,leafValue:a,segmentCount:s.length}}function se(t,n){return null===t?o:"boolean"==typeof t||"number"==typeof t?String(t):function(t,n=y){return function(t,n=y){return!(!t||t!==t.trim()||m(t)||function(e){return/^-?\d+(?:\.\d+)?(?:e[+-]?\d+)?$/i.test(e)||/^0\d+$/.test(e)}(t)||t.includes(":")||t.includes('"')||t.includes("\\")||/[[\]{}]/.test(t)||/[\n\r\t]/.test(t)||t.includes(n)||t.startsWith(e))}(t,n)?t:`${d}${u(t)}${d}`}(t,n)}function de(e){return function(e){return/^[A-Z_][\w.]*$/i.test(e)}(e)?e:`${d}${u(e)}${d}`}function ae(e,t=y){return e.map((e=>se(e,t))).join(t)}function fe(e,t){const n=t?.key,i=t?.fields,r=t?.delimiter??",";let o="";if(n&&(o+=de(n)),o+=`[${e}${r!==y?r:""}]`,i){o+=`{${i.map((e=>de(e))).join(r)}}`}return o+=":",o}function*ye(e,t,n,i,r,o){const c=Object.keys(e);0!==t||i||(i=new Set(c.filter((e=>e.includes(".")))));const l=o??n.flattenDepth;for(const[o,s]of Object.entries(e))yield*ue(o,s,t,n,c,i,r,l)}function*ue(e,t,n,r,o,c,l,s){const d=l?`${l}${i}${e}`:e,a=s??r.flattenDepth;if("safe"===r.keyFolding&&o){const s=le(e,t,o,r,c,l,a);if(s){const{foldedKey:e,remainder:t,leafValue:o,segmentCount:d}=s,f=de(e);if(void 0===t){if(G(o))return void(yield ke(n,`${f}: ${se(o,r.delimiter)}`,r.indent));if(Z(o))return void(yield*he(e,o,n,r));if(z(o)&&X(o))return void(yield ke(n,`${f}:`,r.indent))}if(z(t)){yield ke(n,`${f}:`,r.indent);const o=a-d,s=l?`${l}${i}${e}`:e;return void(yield*ye(t,n+1,r,c,s,o))}}}const f=de(e);G(t)?yield ke(n,`${f}: ${se(t,r.delimiter)}`,r.indent):Z(t)?yield*he(e,t,n,r):z(t)&&(yield ke(n,`${f}:`,r.indent),X(t)||(yield*ye(t,n+1,r,c,d,a)))}function*he(e,t,n,i){if(0!==t.length)if(Y(t))yield ke(n,pe(t,i.delimiter,e),i.indent);else if(function(e){return 0===e.length||e.every((e=>Z(e)))}(t)&&t.every((e=>Y(e))))yield*function*(e,t,n,i){yield ke(n,fe(t.length,{key:e,delimiter:i.delimiter}),i.indent);for(const e of t)if(Y(e)){const t=pe(e,i.delimiter);yield we(n+1,t,i.indent)}}(e,t,n,i);else if(H(t)){const r=be(t);r?yield*function*(e,t,n,i,r){yield ke(i,fe(t.length,{key:e,fields:n,delimiter:r.delimiter}),r.indent),yield*me(t,n,i+1,r)}(e,t,r,n,i):yield*ge(e,t,n,i)}else yield*ge(e,t,n,i);else yield ke(n,fe(0,{key:e,delimiter:i.delimiter}),i.indent)}function pe(e,t,n){const i=fe(e.length,{key:n,delimiter:t}),r=ae(e,t);return 0===e.length?i:`${i} ${r}`}function be(e){if(0===e.length)return;const t=e[0],n=Object.keys(t);return 0!==n.length&&function(e,t){for(const n of e){if(Object.keys(n).length!==t.length)return!1;for(const e of t){if(!(e in n))return!1;if(!G(n[e]))return!1}}return!0}(e,n)?n:void 0}function*me(e,t,n,i){for(const r of e)yield ke(n,ae(t.map((e=>r[e])),i.delimiter),i.indent)}function*ge(e,t,n,i){yield ke(n,fe(t.length,{key:e,delimiter:i.delimiter}),i.indent);for(const e of t)yield*ve(e,n+1,i)}function*ve(t,n,i){if(G(t))yield we(n,se(t,i.delimiter),i.indent);else if(Z(t))if(Y(t))yield we(n,pe(t,i.delimiter),i.indent);else{yield we(n,fe(t.length,{delimiter:i.delimiter}),i.indent);for(const e of t)yield*ve(e,n+1,i)}else z(t)&&(yield*function*(t,n,i){if(X(t))return void(yield ke(n,e,i.indent));const r=Object.entries(t),[o,c]=r[0],l=r.slice(1);if(Z(c)&&H(c)){const e=be(c);if(e)return yield we(n,fe(c.length,{key:o,fields:e,delimiter:i.delimiter}),i.indent),yield*me(c,e,n+2,i),void(l.length>0&&(yield*ye(Object.fromEntries(l),n+1,i)))}const s=de(o);if(G(c))yield we(n,`${s}: ${se(c,i.delimiter)}`,i.indent);else if(Z(c))if(0===c.length)yield we(n,`${s}${fe(0,{delimiter:i.delimiter})}`,i.indent);else if(Y(c))yield we(n,`${s}${pe(c,i.delimiter)}`,i.indent);else{yield we(n,`${s}${fe(c.length,{delimiter:i.delimiter})}`,i.indent);for(const e of c)yield*ve(e,n+2,i)}else z(c)&&(yield we(n,`${s}:`,i.indent),X(c)||(yield*ye(c,n+2,i)));l.length>0&&(yield*ye(Object.fromEntries(l),n+1,i))}(t,n,i))}function ke(e,t,n){return" ".repeat(n*e)+t}function we(e,n,i){return ke(e,t+n,i)}function je(e,t){return Array.from($e(e,t)).join("\n")}function Oe(e,t){return Ee(e.split("\n"),t)}function $e(e,t){return function*(e,t,n){if(G(e)){const n=se(e,t.delimiter);""!==n&&(yield n)}else Z(e)?yield*he(void 0,e,n,t):z(e)&&(yield*ye(e,n,t))}(C(e),function(e){return{indent:e?.indent??2,delimiter:e?.delimiter??y,keyFolding:e?.keyFolding??"off",flattenDepth:e?.flattenDepth??Number.POSITIVE_INFINITY}}(t),0)}function Ee(e,t){const n=function(e){return{indent:e?.indent??2,strict:e?.strict??!0,expandPaths:e?.expandPaths??"off"}}(t),i=oe(V(e,{indent:n.indent,strict:n.strict}));return"safe"===n.expandPaths?te(i,n.strict):i}function Se(e,t){return V(e,t)}function xe(e,t){return _(e,t)}export{y as DEFAULT_DELIMITER,f as DELIMITERS,Oe as decode,Ee as decodeFromLines,xe as decodeStream,Se as decodeStreamSync,je as encode,$e as encodeLines};export default null;
//# sourceMappingURL=/sm/83d66fc152d3933d10d87c2eab93050aba4a7ebebb34c59e663456876e43ccc6.map